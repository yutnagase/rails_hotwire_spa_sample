<%= turbo_stream.update "flash_messages" do %>
  <div class="mb-4 bg-green-50 border border-green-200 rounded-md p-4">
    <div class="flex">
      <div class="ml-3">
        <p class="text-sm font-medium text-green-800">従業員が正常に作成されました。</p>
      </div>
    </div>
  </div>
<% end %>

<%= turbo_stream.update "employees_list" do %>
  <table class="min-w-full divide-y divide-gray-300">
    <thead class="bg-gray-50">
      <tr>
        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">名前</th>
        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">メールアドレス</th>
        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">住所</th>
        <th scope="col" class="relative px-6 py-3"><span class="sr-only">操作</span></th>
      </tr>
    </thead>
    <tbody class="bg-white divide-y divide-gray-200">
      <% Employee.all.each do |employee| %>
        <tr id="employee_<%= employee.id %>">
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><%= employee.id %></td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"><%= employee.name %></td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><%= employee.email %></td>
          <td class="px-6 py-4 text-sm text-gray-500"><%= employee.address %></td>
          <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
            <%= link_to "表示", employee, class: "text-indigo-600 hover:text-indigo-900 mr-3", data: { turbo_frame: "_top" } %>
            <%= link_to "編集", edit_employee_path(employee), 
                class: "text-indigo-600 hover:text-indigo-900 mr-3",
                data: { turbo_frame: "employee_form" } %>
            <%= link_to "削除", employee, method: :delete,
                class: "text-red-600 hover:text-red-900",
                confirm: "本当に削除しますか？",
                data: { turbo_method: :delete } %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>

<%= turbo_stream.update "employee_form", "" %>