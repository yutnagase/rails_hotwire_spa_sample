<%= turbo_stream.prepend "purchases_list tbody" do %>
  <tr id="purchase_<%= @purchase.id %>">
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><%= @purchase.date.strftime("%Y/%m/%d") %></td>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><%= @purchase.employee.name %></td>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><%= @purchase.product.name %></td>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><%= @purchase.quantity %></td>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">¥<%= number_with_delimiter(@purchase.amount) %></td>
    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
      <%= link_to "表示", @purchase, class: "text-red-600 hover:text-red-900 mr-3" %>
      <%= link_to "編集", edit_purchase_path(@purchase), 
          class: "text-red-600 hover:text-red-900 mr-3",
          data: { turbo_frame: "purchase_form" } %>
      <%= link_to "削除", @purchase, method: :delete,
          class: "text-red-600 hover:text-red-900",
          confirm: "本当に削除しますか？",
          data: { turbo_method: :delete } %>
    </td>
  </tr>
<% end %>

<%= turbo_stream.update "purchase_form", "" %>